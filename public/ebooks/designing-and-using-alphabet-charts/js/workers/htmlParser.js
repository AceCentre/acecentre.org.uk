var id,self=this;function parse(e){var n,r=(e=e||{}).html,t=e.WEBVIEW_SERVER_URL,a=e.mobile,i=e.native,s=[];r.indexOf("<pre"),r.indexOf("<code"),r.indexOf("<script");s.push(/([< \/][^>]*?>)((\s*[^<\s]+\s+?)+)([^<\s]+\s*)(<)/g),n=/(>)([^<\n]*?[^<]+?)(<[^\/])/g;for(var f=0;f<s.length;f++){var c=s[f];r=r.replace(c,function(e,n){if(0<=n.indexOf('class="parsed'))return e;if(0==n.indexOf("<pre"))return e;if(0==n.indexOf("<code"))return e;if(0==n.indexOf("<script"))return e;var r="",t=arguments[2].split(" ");""==t[t.length-1]&&t.splice(-1,1),t.push(arguments[4]);for(var a=0;a<t.length;a++){var i=a==t.length-1?"":" ";r+="<span>"+t[a]+i+"</span>"}return n+r+"<"})}n&&(r=r.replace(n,function(e,n){return arguments[2].trim()?n+("<span>"+arguments[2]+"</span>")+arguments[3]:e})),r=r.replace(/(<a [\s\S]*?)(>)/g,'$1 onclick="return false;" $2'),i&&a&&(r=r.replace(/(<img[^>]*src=)"(.*?)"/g,function(e,n){var r=arguments[2];try{r=function(e){return e?0!==e.indexOf("/")?0!==e.indexOf("file://")?0!==e.indexOf("content://")?e:t+e.replace("content:/","/_app_content_"):t+e.replace("file://","/_app_file_"):t+"/_app_file_"+e:e}(r)}catch(e){}return n+'"'+r+'"'})),self.postMessage({data:r,id:id})}self.addEventListener("message",function(e){var n=e.data.func,r=e.data.params;id=e.data.id,self[n].apply(self,r)},!1);var log=console.log;function clone(e){if(null==e||"object"!=typeof e)return e;var n=e.constructor();for(var r in e)e.hasOwnProperty(r)&&(n[r]=clone(e[r]));return n}